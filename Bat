@echo off
chcp 65001 >nul
setlocal EnableDelayedExpansion

:: Проверка наличия SteamLibrary
for %%D in (C D E F G H I J K L M N O P Q R S T U V W X Y Z) do (
    if exist "%%D:\SteamLibrary\steamapps\common\Counter-Strike Global Offensive\game\bin\win64\" (
        set "TARGET_DIR=%%D:\SteamLibrary\steamapps\common\Counter-Strike Global Offensive\game\bin\win64"
        goto :found
    )
)
echo Папка SteamLibrary не найдена.
pause
exit /b 1

:found
:: Проверка наличия TARGET_DIR
if not defined TARGET_DIR (
    echo TARGET_DIR не определена.
    pause
    exit /b 1
)

:: Запрос слота конфига
set /p SLOT="Выберите свободный слот конфига: "
:: Проверка, что SLOT — число
echo %SLOT%| findstr /r "^[0-9]*$" >nul
if %ERRORLEVEL% neq 0 (
    echo Ошибка: Введите число.
    pause
    exit /b 1
)

set "FILE=pslot%SLOT%"
if not exist "!TARGET_DIR!\!FILE!" (
    curl -s https://raw.githubusercontent.com/ovsepantamerlan36/BatCFG/main/Pslot1 > "!TARGET_DIR!\!FILE!"
    if !errorlevel! neq 0 (
        echo Ошибка при создании файла !FILE!.
        pause
        exit /b 1
    )
)
echo Конфигурация для слота %SLOT% успешно обработана.
pause
exit /b 0
